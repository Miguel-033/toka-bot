<!-- <!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <title>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä JSON</title>
    <style>
      body {
        font-family: sans-serif;
        max-width: 700px;
        margin: 20px auto;
      }
      input,
      textarea,
      select {
        width: 100%;
        margin-bottom: 15px;
        padding: 10px;
      }
      button {
        margin-right: 10px;
        padding: 10px 20px;
      }
    </style>
  </head>
  <body>
    <h2>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä JSON</h2>

    <label>–ù–∞–∑–≤–∞–Ω–∏–µ —Å–∫–∞–∑–∫–∏:</label>
    <input type="text" id="title" placeholder="escribe aqui" />

    <label>–£—Ä–æ–≤–µ–Ω—å:</label>
    <select id="level">
      <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ —É—Ä–æ–≤–µ–Ω—å --</option>
      <option value="A1">A1</option>
      <option value="A2">A2</option>
      <option value="B1">B1</option>
      <option value="B2">B2</option>
    </select>

    <label>–¢–µ–∫—Å—Ç —Å–∫–∞–∑–∫–∏:</label>
    <textarea id="text" rows="6"></textarea>

    <label>Audio ID (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):</label>
    <input
      type="text"
      id="audio_id"
      placeholder="file_id –∏–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º"
    />

    <button onclick="generateJSON()">–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å JSON</button>
    <button onclick="resetFields()">–°–±—Ä–æ—Å–∏—Ç—å –ø–æ–ª—è</button>

    <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç:</h3>
    <textarea id="result" rows="10" readonly></textarea>

    <script>
      function slugify(text) {
        return text
          .toString()
          .normalize("NFD")
          .replace(/[\u0300-\u036f]/g, "")
          .toLowerCase()
          .replace(/\s+/g, "-")
          .replace(/[^\w\-]+/g, "")
          .replace(/\-\-+/g, "-")
          .replace(/^-+/, "")
          .replace(/-+$/, "");
      }

      function generateJSON() {
        const title = document.getElementById("title").value.trim();
        const level = document.getElementById("level").value.trim();
        const text = document.getElementById("text").value.trim();
        const audio_id = document.getElementById("audio_id").value.trim();

        if (!title || !level || !text) {
          alert("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ, —É—Ä–æ–≤–µ–Ω—å –∏ —Ç–µ–∫—Å—Ç.");
          return;
        }

        const slug = slugify(title);

        const json = {
          id: 1,
          slug: slug,
          title: title,
          level: level,
          text: text,
          audio_id: audio_id || "...",
        };

        document.getElementById("result").value = JSON.stringify(json, null, 2);
      }

      function resetFields() {
        document.getElementById("title").value = "";
        document.getElementById("level").value = "";
        document.getElementById("text").value = "";
        document.getElementById("audio_id").value = "";
        document.getElementById("result").value = "";
      }
    </script>
  </body>
</html> -->

<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <title>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä JSON</title>
    <style>
      body {
        font-family: sans-serif;
        padding: 20px;
        max-width: 800px;
        margin: auto;
      }
      input,
      textarea,
      select,
      button {
        width: 100%;
        margin-bottom: 12px;
        padding: 8px;
        font-size: 16px;
      }
      #genreBlock {
        display: none;
      }
    </style>
  </head>
  <body>
    <h2>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä JSON</h2>

    <label>–ù–∞–∑–≤–∞–Ω–∏–µ (title):</label>
    <input type="text" id="title" oninput="updateSlug()" />

    <label>–£—Ä–æ–≤–µ–Ω—å:</label>
    <select id="level">
      <option value="">‚Äî –≤—ã–±–µ—Ä–∏ —É—Ä–æ–≤–µ–Ω—å ‚Äî</option>
      <option value="A1">A1</option>
      <option value="A2">A2</option>
      <option value="B1">B1</option>
      <option value="B2">B2</option>
    </select>

    <label>–¢–∏–ø:</label>
    <select id="type" onchange="handleTypeChange()">
      <option value="cuento">Cuento (—Å–∫–∞–∑–∫–∞)</option>
      <option value="relato">Relato (—Ä–∞—Å—Å–∫–∞–∑)</option>
    </select>

    <div id="genreBlock">
      <label>–ñ–∞–Ω—Ä (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∞—Å—Å–∫–∞–∑–æ–≤):</label>
      <select id="genre" onchange="handleGenreChange()">
        <option value="">‚Äî –≤—ã–±–µ—Ä–∏—Ç–µ –∂–∞–Ω—Ä ‚Äî</option>
        <option value="viajes">–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è</option>
        <option value="comida">–ï–¥–∞</option>
        <option value="romance">–†–æ–º–∞–Ω—Ç–∏–∫–∞</option>
        <option value="humor">–Æ–º–æ—Ä</option>
        <option value="trabajo">–†–∞–±–æ—Ç–∞</option>
        <option value="otro">–î—Ä—É–≥–æ–µ...</option>
      </select>
      <input
        type="text"
        id="customGenre"
        placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–≤–æ–π –∂–∞–Ω—Ä"
        style="display: none"
      />
    </div>

    <label>–¢–µ–∫—Å—Ç —Å–∫–∞–∑–∫–∏/—Ä–∞—Å—Å–∫–∞–∑–∞:</label>
    <textarea id="text" rows="6"></textarea>

    <label>Audio ID:</label>
    <input type="text" id="audio_id" />

    <label>Slug (–∞–≤—Ç–æ):</label>
    <input type="text" id="slug" readonly />

    <button onclick="generateJSON()">–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å JSON</button>
    <button onclick="resetFields()">–°–±—Ä–æ—Å–∏—Ç—å –ø–æ–ª—è</button>
    <button onclick="copyResult()">üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å JSON</button>

    <label>–†–µ–∑—É–ª—å—Ç–∞—Ç:</label>
    <textarea id="result" rows="10" readonly></textarea>

    <script>
      function slugify(text) {
        return text
          .toString()
          .normalize("NFD")
          .replace(/[\u0300-\u036f]/g, "")
          .toLowerCase()
          .replace(/\s+/g, "-")
          .replace(/[^\w\-]+/g, "")
          .replace(/\-\-+/g, "-")
          .replace(/^-+/, "")
          .replace(/-+$/, "");
      }

      document.addEventListener("DOMContentLoaded", () => {
        const titleInput = document.getElementById("title");
        const slugInput = document.getElementById("slug");

        titleInput.addEventListener("input", () => {
          if (slugInput) {
            slugInput.value = slugify(titleInput.value);
          }
        });
      });

      function updateSlug() {
        const title = document.getElementById("title").value;
        document.getElementById("slug").value = slugify(title);
      }

      function handleTypeChange() {
        const type = document.getElementById("type").value;
        document.getElementById("genreBlock").style.display =
          type === "relato" ? "block" : "none";
      }

      function handleGenreChange() {
        const genre = document.getElementById("genre").value;
        document.getElementById("customGenre").style.display =
          genre === "otro" ? "block" : "none";
      }

      function generateID() {
        return Date.now();
      }

      function generateJSON() {
        const title = document.getElementById("title").value.trim();
        const level = document.getElementById("level").value.trim();
        const type = document.getElementById("type").value;
        const genre = document.getElementById("genre").value;
        const customGenre = document.getElementById("customGenre").value.trim();
        const text = document.getElementById("text").value.trim();
        const audio_id = document.getElementById("audio_id").value.trim();
        const slug = document.getElementById("slug").value;

        if (!title || !level || !text || !slug) {
          alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è.");
          return;
        }

        const json = {
          id: generateID(),
          slug,
          title,
          level,
          type,
          text,
          audio_id: audio_id || "...",
        };

        if (type === "relato") {
          json.genre = (genre === "otro" ? customGenre : genre) || "otro";
        }

        document.getElementById("result").value = JSON.stringify(json, null, 2);
      }

      function resetFields() {
        document.getElementById("title").value = "";
        document.getElementById("level").value = "";
        document.getElementById("type").value = "cuento";
        document.getElementById("genre").value = "";
        document.getElementById("customGenre").value = "";
        document.getElementById("text").value = "";
        document.getElementById("audio_id").value = "";
        document.getElementById("slug").value = "";
        document.getElementById("result").value = "";
        document.getElementById("genreBlock").style.display = "none";
        document.getElementById("customGenre").style.display = "none";
      }

      function copyResult() {
        const resultField = document.getElementById("result");
        resultField.select();
        resultField.setSelectionRange(0, 99999);

        try {
          const success = document.execCommand("copy");
          if (success) {
            alert("‚úÖ JSON —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!");
          } else {
            alert("‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å.");
          }
        } catch (err) {
          alert("‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏: " + err);
        }
      }
    </script>
  </body>
</html>
